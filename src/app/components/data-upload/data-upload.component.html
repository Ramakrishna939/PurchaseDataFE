<div class="container col-lg-6" *ngIf="isUserUpload">

    <h1 class="text-center">Please Upload the Users data CSV File</h1>
    <div class="card">
        <div class="card-body">
            <form class="form-group" [formGroup]="userUploadForm">
                <!-- <div class="alert alert-warning" *ngIf='isFileNotUploaded'>{{errorMessage}}</div>
                <div class="alert alert-success" *ngIf='isFileUploaded'>{{successMessage}}</div> -->
                <div class="alert alert-success" *ngIf='showMessage'>{{messaage}}</div>
                <div class="form-group">
                    <label for="email">File :</label>
                    <input type="file" class="form-control" #fileImportInput name="File Upload" id="csvFileUpload"
                        formControlName="uploadedfiles" (change)="fileChangeListener($event)" accept=".csv" />
                </div>

                <div class="row d-flex">
                    <div>
                        <button (click)=onClickUpload() class="btn btn-success">Upload and Save</button>
                    </div>
                    <div style="margin-left: 16px;">
                        <button (click)=onClickReset() class="btn btn-success">Reset</button>
                    </div>

                </div>

            </form>
        </div>
    </div>
</div>


<div class="container" *ngIf="isPurchaseUpload">

    <h2 class="text-center">Please Upload the Purchase data CSV File</h2>
    <div class="card">
        <div class="card-body">
            <form class="form-group" [formGroup]="userUploadForm">

                <div class="alert alert-success" *ngIf='showMessage'>{{messaage}}</div>
                <div class="form-group">
                    <label for="email">File :</label>
                    <input type="file" class="form-control" #fileImportInput name="File Upload" id="csvFileUpload"
                        (change)="fileChangeListener($event)" accept=".csv" />
                </div>

                <div class="form-group">
                    <label for="email">Frequency Range :</label>



                    <select class="form-control" id="exampleFormControlSelect1" formControlName="selectedFreq">
                        <option *ngFor="let sta of frequency" [ngValue]="sta.code">{{sta.name}}</option>

                    </select>


                    <!-- <div style=" margin-left: 8px;" class="form-control">
                        <p-dropdown [options]="frequency"  formControlName="selectedFreq" optionLabel="name" [filter]="true"
                        [showClear]="true" placeholder="Select Frequency" optionValue="code"></p-dropdown>
                    </div> -->

                </div>
                <div class="row d-flex col-md-12" *ngIf="showDateRange">
                    <div class="form-group my-4 col-md-5">
                        <label for="icon">From Date</label>
                        <div class="mr-4">
                            <p-calendar class="" formControlName="fromDate" [showIcon]="true" inputId="icon">
                            </p-calendar>
                        </div>
                    </div>

                    <div class="form-group my-4 col-md-5">
                        <label for="icon">To Date</label>
                        <div class="mr-4">
                            <p-calendar class="" formControlName="toDate" [showIcon]="true" inputId="icon">
                            </p-calendar>
                        </div>
                    </div>
                </div>
                <div class="row d-flex" style="margin-left: 0px;">
                    <div>
                        <button (click)=onClickUpload() class="btn btn-success">Upload and Save</button>
                    </div>
                    <div style="margin-left: 16px;">
                        <button (click)=onClickReset() class="btn btn-success">Reset</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="col-md-12 p-0" *ngIf = "showTableData" style="margin-top: 16px;">
        <!-- <div>
            <p-paginator ></p-paginator>
        </div> -->
        
        <p-table [value]="purchaseDataList" tableStyleClass="red-bottom-border" 
        [paginator]="true" [rows]="5" [totalRecords]="totalRecords" [rowsPerPageOptions]="[5,10]">
            <ng-template pTemplate="caption">
                <div class="row  d-flex">

                    <div class="col-md-3">Purchase Data</div>
                    <div class="col-md-8"></div>
                    

                </div>



            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 3rem;"></th>
                    <th style="width: 5rem;">User Email Id</th>
                    <th style="width: 5rem;">Purchase Date</th>
                    <th style="width: 5rem;">Product ID</th>

                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-element>
                <tr>
                    <td style="width: 3rem;">

                        <!-- <div class="d-flex">
                            <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-mr-2"
                                (click)="onClickEdit(element, index)"></button>
                            <button pButton pRipple icon="pi pi-trash" class="p-button-rounded ml-2 p-button-warning"
                                (click)="onClickdelete(element,index)"></button>

                        </div> -->
                    </td>
                    <td style="width: 5rem;">{{element.userEmailId}}</td>
                    <td style="width: 5rem;">{{element.purchaseDate}}</td>
                    <td style="width: 5rem;">{{element.productId}}</td>

                </tr>
            </ng-template>
        </p-table>
    </div>

</div>